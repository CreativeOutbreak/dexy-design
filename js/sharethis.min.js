var show_class="showthis",transition_class="transition",sharethis_class=".sharethis_box",loaded=!1,$st=$(sharethis_class),usn_all,usn_medium,bpw,debug=!0;$(document).ready(function(){$st.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){e.stopPropagation(),dbug("transition ended"),dbug($st.hasClass(show_class)?"Showing!!":"Not Showing!!")})});var toggleShareThis=function(){bpw>usn_medium?loaded&&$st.addClass(show_class):$st.removeClass(show_class)},hideShareThis=function(){dbug("hideFunction"),$st.removeClass(show_class)},showShareThis=function(){loaded&&$st.addClass(show_class)},loadedShareThis=function(){loaded=!0,setTimeout(function(){$st.addClass(transition_class),toggleShareThis()},1e3)},cleanPXString=function(str){return Number(str.replace("px",""))},dbug=function(msg){debug&&console.log(msg)},fsm=new NI.FSM;fsm.extendStates({open:showShareThis,close:hideShareThis}),fsm.changeState("open"),dbug(fsm.states),$(sharethis_class).bind("DOMSubtreeModified",function(e){$(this).unbind(e),usn_all=Unison.fetch.all();var bp_now=Unison.fetch.now();usn_medium=cleanPXString(usn_all["usn-medium"]),bpw=cleanPXString(bp_now.width),loadedShareThis()}),Unison.on("change",function(bp){dbug("BreakPoint Changed to: "+bp.width),bpw=cleanPXString(bp.width),toggleShareThis()});